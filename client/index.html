<!DOCTYPE html>
<html>
  <head>
    <title></title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/style.css">
  </head>
  <body>
  <button id="search">Search</button>
    <canvas id="canvasBackground"></canvas>
    <div id="dialog-container"></div>
    <script type="module" src="/src/main.js"></script>
    <script>
     document.body.addEventListener('htmx:afterSwap', function (event) {
         const dialog = event.detail.elt.querySelector('dialog');
         if (dialog) {
             dialog.showModal();
         }
     });

     document.body.addEventListener("eventSaved", (evt) => {
         const serverData = evt.detail;
         const formattedEvent = {
             ...serverData,
             startDate: new Date(serverData.startDate),
             endDate: new Date(serverData.endDate),
             color: parseInt(serverData.color, 16),
         };

         const appEvent = new CustomEvent('dispatchApp', {
             detail: { type: 'SAVE_EVENT', event: formattedEvent }
         });
         document.body.dispatchEvent(appEvent);
     });

     document.body.addEventListener("eventDeleted", (evt) => {
         const serverData = evt.detail;
         const appEvent = new CustomEvent('dispatchApp', {
             detail: { type: 'EVENT_DELETED', event: serverData.value }
         });
         document.body.dispatchEvent(appEvent);
     });
    </script>
  </body>
</html>
